import type { ReactiveDatabase } from '../reactive-sqlite/index.js';
export type BuildStatus = 'passing' | 'broken' | 'fixing';
export interface BuildState {
    id: number;
    status: BuildStatus;
    fixer_agent_id: string | null;
    broken_since: string | null;
    last_check: string | null;
}
export interface BuildStateDecision {
    shouldFix: boolean;
    waitMs: number;
    state: BuildState;
}
export interface BuildStateModule {
    get: () => BuildState;
    handleBrokenBuild: (agentId: string, options?: {
        waitMs?: number;
        staleMs?: number;
    }) => BuildStateDecision;
    markFixed: () => BuildState;
    cleanup: (staleMs?: number) => BuildState;
}
export interface BuildStateModuleContext {
    rdb: ReactiveDatabase;
}
export declare function createBuildStateModule(ctx: BuildStateModuleContext): BuildStateModule;
//# sourceMappingURL=build-state.d.ts.map