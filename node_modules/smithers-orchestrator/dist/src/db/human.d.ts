import type { ReactiveDatabase } from '../reactive-sqlite/index.js';
export type HumanInteractionType = 'confirmation' | 'select' | 'input' | 'text' | 'interactive_session';
export type HumanInteractionStatus = 'pending' | 'approved' | 'rejected' | 'timeout' | 'cancelled' | 'completed' | 'failed';
export interface InteractiveOutcomeSchema {
    type: 'approval' | 'selection' | 'freeform' | 'structured';
    options?: string[];
    jsonSchema?: Record<string, unknown>;
}
export interface InteractiveSessionConfig {
    systemPrompt?: string;
    context?: Record<string, unknown>;
    model?: string;
    cwd?: string;
    mcpConfig?: string;
    timeout?: number;
    outcomeSchema?: InteractiveOutcomeSchema;
    captureTranscript?: boolean;
    blockOrchestration?: boolean;
}
/** Raw database row (JSON fields are strings). */
export interface HumanInteractionRow {
    id: string;
    execution_id: string;
    type: HumanInteractionType;
    prompt: string;
    options: string | null;
    status: HumanInteractionStatus;
    response: string | null;
    created_at: string;
    resolved_at: string | null;
    session_config: string | null;
    session_transcript: string | null;
    session_duration: number | null;
    error: string | null;
}
export interface HumanInteraction {
    id: string;
    execution_id: string;
    type: HumanInteractionType;
    prompt: string;
    options: string[] | null;
    status: HumanInteractionStatus;
    response: any | null;
    created_at: string;
    resolved_at: string | null;
    session_config?: InteractiveSessionConfig | null;
    session_transcript?: string | null;
    session_duration?: number | null;
    error?: string | null;
}
export interface HumanModule {
    /**
     * Request human interaction
     */
    request: (type: HumanInteractionType, prompt: string, options?: string[]) => string;
    /**
     * Request an interactive Claude session
     */
    requestInteractive: (prompt: string, config: InteractiveSessionConfig) => string;
    /**
     * Resolve a request (called by external harness)
     */
    resolve: (id: string, status: 'approved' | 'rejected', response?: unknown) => void;
    /**
     * Complete an interactive session with lifecycle outcome
     */
    completeInteractive: (id: string, outcome: 'completed' | 'cancelled' | 'timeout' | 'failed', response: unknown, options?: {
        transcript?: string;
        duration?: number;
        error?: string;
    }) => void;
    /**
     * Cancel a pending interactive session
     */
    cancelInteractive: (id: string) => void;
    /**
     * Get a request by ID
     */
    get: (id: string) => HumanInteraction | null;
    /**
     * List pending requests
     */
    listPending: (executionId?: string) => HumanInteraction[];
}
export interface HumanModuleContext {
    rdb: ReactiveDatabase;
    getCurrentExecutionId: () => string | null;
}
export declare function parseHumanInteraction(row: HumanInteractionRow): HumanInteraction;
export declare function createHumanModule(ctx: HumanModuleContext): HumanModule;
//# sourceMappingURL=human.d.ts.map