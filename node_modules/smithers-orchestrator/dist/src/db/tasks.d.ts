import type { ReactiveDatabase } from '../reactive-sqlite/index.js';
export interface Task {
    id: string;
    execution_id: string;
    iteration: number;
    component_type: string;
    component_name: string | null;
    status: 'running' | 'completed' | 'failed';
    started_at: string;
    completed_at: string | null;
    duration_ms: number | null;
}
export interface TasksModule {
    /**
     * Start a new task and return its ID.
     * Replaces registerTask() in RalphContext.
     */
    start: (componentType: string, componentName?: string) => string;
    /**
     * Complete a task by ID.
     * Replaces completeTask() in RalphContext.
     */
    complete: (id: string) => void;
    /**
     * Mark a task as failed.
     */
    fail: (id: string) => void;
    /**
     * Get count of running tasks for a specific iteration.
     */
    getRunningCount: (iteration: number) => number;
    /**
     * Get count of all tasks for a specific iteration.
     */
    getTotalCount: (iteration: number) => number;
    /**
     * Get all tasks for the current execution.
     */
    list: () => Task[];
    /**
     * Get current iteration from the state table.
     */
    getCurrentIteration: () => number;
    /**
     * Execute a function within a task lifecycle.
     * Automatically starts task before execution and completes/fails after.
     * Ensures task is always properly completed even on errors.
     */
    withTask: <T>(componentType: string, componentName: string | undefined, fn: () => T | Promise<T>) => Promise<T>;
}
export interface TasksModuleContext {
    rdb: ReactiveDatabase;
    getCurrentExecutionId: () => string | null;
}
export declare function createTasksModule(ctx: TasksModuleContext): TasksModule;
//# sourceMappingURL=tasks.d.ts.map