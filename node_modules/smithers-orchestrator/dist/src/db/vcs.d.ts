import type { ReactiveDatabase } from '../reactive-sqlite/index.js';
import type { Commit, Snapshot, Review, Report, ReviewIssue, ReviewApproval } from './types.js';
export interface VcsModule {
    logCommit: (commit: {
        vcs_type: 'git' | 'jj';
        commit_hash: string;
        change_id?: string;
        message: string;
        author?: string;
        files_changed?: string[];
        insertions?: number;
        deletions?: number;
        smithers_metadata?: Record<string, any>;
        agent_id?: string;
    }) => string;
    getCommits: (limit?: number) => Commit[];
    getCommit: (hash: string, vcsType?: 'git' | 'jj') => Commit | null;
    logSnapshot: (snapshot: {
        change_id: string;
        commit_hash?: string;
        description?: string;
        files_modified?: string[];
        files_added?: string[];
        files_deleted?: string[];
        has_conflicts?: boolean;
    }) => string;
    getSnapshots: (limit?: number) => Snapshot[];
    logReview: (review: {
        target_type: 'commit' | 'diff' | 'pr' | 'files';
        target_ref?: string;
        approved: boolean;
        summary: string;
        issues: ReviewIssue[];
        approvals?: ReviewApproval[];
        reviewer_model?: string;
        blocking?: boolean;
        agent_id?: string;
    }) => string;
    updateReview: (id: string, updates: {
        posted_to_github?: boolean;
        posted_to_git_notes?: boolean;
    }) => void;
    getReviews: (limit?: number) => Review[];
    getBlockingReviews: () => Review[];
    addReport: (report: {
        type: 'progress' | 'finding' | 'warning' | 'error' | 'metric' | 'decision';
        title: string;
        content: string;
        data?: Record<string, any>;
        severity?: 'info' | 'warning' | 'critical';
        agent_id?: string;
    }) => string;
    getReports: (type?: Report['type'], limit?: number) => Report[];
    getCriticalReports: () => Report[];
}
export interface VcsModuleContext {
    rdb: ReactiveDatabase;
    getCurrentExecutionId: () => string | null;
}
export declare function createVcsModule(ctx: VcsModuleContext): VcsModule;
//# sourceMappingURL=vcs.d.ts.map