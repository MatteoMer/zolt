import { useEffectOnValueChange } from '../reconciler/hooks.js';
const CAPTURE_DELAY_MS = 50;
/**
 * Captures render frame on each Ralph iteration.
 * This is a side-effect hook that stores XML tree snapshots.
 */
export function useCaptureRenderFrame(db, ralphCount, getTreeXML) {
    useEffectOnValueChange(ralphCount, () => {
        const captureFrame = () => {
            try {
                const treeXml = getTreeXML?.();
                if (!treeXml)
                    return;
                db.renderFrames.store(treeXml, ralphCount);
            }
            catch (e) {
                console.warn('[useCaptureRenderFrame] Frame capture failed:', e);
            }
        };
        const timeoutId = setTimeout(captureFrame, CAPTURE_DELAY_MS);
        return () => clearTimeout(timeoutId);
    }, [db, getTreeXML]);
}
//# sourceMappingURL=useCaptureRenderFrame.js.map