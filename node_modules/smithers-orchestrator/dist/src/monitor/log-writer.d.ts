import type { SmithersStreamPart } from '../streaming/types.js';
import type { StreamSummary } from '../db/types.js';
export declare class LogWriter {
    private logDir;
    private counter;
    private sessionId;
    private streams;
    constructor(logDir?: string, executionId?: string);
    writeLog(type: string, content: string, metadata?: Record<string, any>): string;
    /**
     * Append content to a log file using a persistent WriteStream for efficiency.
     * Creates the file if it doesn't exist.
     * Returns the full path to the log file.
     */
    appendLog(filename: string, content: string): string;
    /**
     * Append a typed stream part as NDJSON.
     */
    appendStreamPart(filename: string, part: SmithersStreamPart): string;
    /**
     * Write a summary file for stream events.
     */
    writeStreamSummary(filename: string, parts: SmithersStreamPart[]): string;
    /**
     * Write a summary file from precomputed counts.
     */
    writeStreamSummaryFromCounts(filename: string, summary: StreamSummary): string;
    /**
     * Close a specific log stream. Call when done writing to a log file.
     */
    closeStream(filename: string): void;
    /**
     * Close all open streams. Call when done with the LogWriter.
     */
    closeAllStreams(): void;
    /**
     * Flush and close all open streams, waiting for writes to complete.
     * Use this before process exit to ensure no logs are lost.
     */
    flushAllStreams(): Promise<void>;
    /**
     * Flush and close a specific stream, waiting for writes to complete.
     */
    flushStream(filename: string): Promise<void>;
    writeToolCall(toolName: string, input: any, output: string): string;
    writeAgentResult(agentName: string, result: string): string;
    writeError(error: Error | string): string;
    getLogDir(): string;
    getSessionId(): string;
}
//# sourceMappingURL=log-writer.d.ts.map